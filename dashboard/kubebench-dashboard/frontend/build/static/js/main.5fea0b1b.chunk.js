(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){e.exports=a(344)},344:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),o=a.n(c),s=a(21),i=a(124),l=a.n(i),u=a(126),m=a.n(u),p=a(30),b=a.n(p),d=Object(s.withStyles)({root:{flexGrow:1},grow:{flexGrow:1}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(l.a,{position:"static",color:"primary"},r.a.createElement(m.a,null,r.a.createElement(b.a,{variant:"display1",color:"inherit",className:t.grow},r.a.createElement("strong",null,"KB Dashboard")))))}),h=a(28),g=function(){return{type:"CLOSE_SNACK"}},E=(a(71),a(215),a(217),a(129)),f=a.n(E),k=a(38),v=a.n(k),O=a(37),y=a.n(O),x=a(39),j=a.n(x),S=a(40),C=a.n(S),w=a(41),T=a.n(w),_=Object(h.b)(function(e){return{yaml:e.yaml,loading:e.loading,snackOpen:e.snackOpen,snackText:e.snackText}},{changeYaml:function(e){return{type:"CHANGE_YAML",yaml:e}},submitWholeYaml:function(e){return{type:"DEPLOY_SUBMIT",loading:!0,yaml:e}},closeSnack:g})(Object(s.withStyles)(function(e){return{root:{width:"90%",margin:"0 auto"},editor:{margin:"0 auto"},submit:{textAlign:"center"},button:{margin:e.spacing.unit},progress:{height:10,margin:10},close:{padding:e.spacing.unit/2}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"Generate"),r.a.createElement("hr",null),e.loading&&r.a.createElement(y.a,{className:t.progress}),r.a.createElement("div",{className:t.editor},r.a.createElement(f.a,{mode:"javascript",theme:"tomorrow",value:e.yaml,onChange:function(t){e.changeYaml(t)},name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},tabSize:2,enableLiveAutocompletion:!0,fontSize:14,width:"100%",height:700})),r.a.createElement("div",{className:t.submit},r.a.createElement(v.a,{variant:"contained",disabled:e.loading,color:"primary",className:t.button,onClick:function(){e.submitWholeYaml(e.yaml)}},"Deploy")),r.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.snackOpen,autoHideDuration:6e3,onClose:e.closeSnack,message:r.a.createElement("span",{id:"message-id"},e.snackText),action:[r.a.createElement(C.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:e.closeSnack},r.a.createElement(T.a,null))]}))})),L=a(132),A=a.n(L),P=a(63),N=a.n(P),D=a(130),U=a.n(D),I=a(131),R=a.n(I),J=Object(h.b)(function(e){return{loading:e.loading,snackOpen:e.snackOpen,snackText:e.snackText,parameters:e.parameters}},{closeSnack:g,changeParameters:function(e,t){return{type:"CHANGE_PARAMETER",name:e,value:t}},submitYamlParameters:function(e){return{type:"DEPLOY_PARAM_SUBMIT",loading:!0,parameters:e}}})(Object(s.withStyles)(function(e){return{root:{width:"90%",margin:"0 auto"},editor:{margin:"0 auto"},submit:{textAlign:"center"},button:{margin:e.spacing.unit},progress:{height:10,margin:10},close:{padding:e.spacing.unit/2},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},help:{padding:e.spacing.unit/2,verticalAlign:"middle"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"Generate from parameters"),r.a.createElement("hr",null),e.loading&&r.a.createElement(y.a,{className:t.progress}),e.parameters.map(function(a,n){return r.a.createElement("div",{key:n},r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,xs:12,sm:3},r.a.createElement(b.a,null,r.a.createElement(U.a,{title:a.description},r.a.createElement(R.a,{className:t.help,color:"primary"})),a.name)),r.a.createElement(N.a,{item:!0,xs:12,sm:8},r.a.createElement(A.a,{className:t.textField,value:a.value,onChange:(c=a.name,function(t){return e.changeParameters(c,t.target.value)})}))));var c}),r.a.createElement("div",{className:t.submit},r.a.createElement(v.a,{variant:"contained",disabled:e.loading,color:"primary",className:t.button,onClick:function(){e.submitYamlParameters(e.parameters)}},"Deploy")),r.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.snackOpen,autoHideDuration:6e3,onClose:e.closeSnack,message:r.a.createElement("span",{id:"message-id"},e.snackText),action:[r.a.createElement(C.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:e.closeSnack},r.a.createElement(T.a,null))]}))})),F=a(133),M=a(134),Y=a(145),B=a(135),H=a(146),K=a(80),G=a.n(K),W=a(139),V=a.n(W),z=a(140),Q=a.n(z),$=a(141),q=a.n($),X=a(136),Z=a.n(X),ee=a(137),te=a.n(ee),ae=a(138),ne=a.n(ae),re=a(79),ce=a.n(re),oe=Object(h.b)(null,{deleteJob:function(e){return{type:"DELETE SUBMIT",name:e}}})(Object(s.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},modal:{top:"40%",left:"40%"}}})(function(e){var t=e.classes;return r.a.createElement(ce.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:e.open,onClose:e.close,className:t.modal},r.a.createElement("div",{className:t.paper},r.a.createElement(b.a,{variant:"h6",id:"modal-title"},e.name),r.a.createElement(b.a,{variant:"subtitle1",id:"simple-modal-description"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/argo/workflows/default/".concat(e.name),target:"_blank"},"Argo")),r.a.createElement("li",null,r.a.createElement("a",{href:"/grafana/",target:"_blank"},"Grafana")))),r.a.createElement(v.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){e.deleteJob(e.name)}},"Delete")))})),se=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).open=function(e){return function(t){a.props.openModal(e)}},a.deleteJob=function(e){a.props.deleteJob(e)},a}return Object(H.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchJobs()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement("h1",null,"Watch"),r.a.createElement("hr",null),this.props.loading&&r.a.createElement(y.a,{className:t.progress}),r.a.createElement(G.a,{component:"nav"},this.props.jobs.map(function(a,n){var c;return c="Running"===a.status?r.a.createElement(Z.a,{className:t.running}):"Failed"===a.status?r.a.createElement(te.a,{className:t.failed}):r.a.createElement(ne.a,{className:t.finished}),r.a.createElement(V.a,{button:!0,key:n,onClick:e.open(n)},r.a.createElement(Q.a,null,c),r.a.createElement(q.a,{inset:!0,primary:a.name}))})),r.a.createElement(oe,{close:this.props.closeModal,open:this.props.modalOpen,name:this.props.name}),r.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.props.snackOpen,autoHideDuration:6e3,onClose:this.props.closeSnack,message:r.a.createElement("span",{id:"message-id"},this.props.snackText),action:[r.a.createElement(C.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.props.closeSnack},r.a.createElement(T.a,null))]}))}}]),t}(r.a.Component),ie=Object(h.b)(function(e){return{jobs:e.jobsList,modalOpen:e.modalOpen,currentId:e.current,name:e.currentName,loading:e.loading,snackOpen:e.snackOpen,snackText:e.snackText}},{openModal:function(e){return{type:"SELECT_JOB",id:e}},closeModal:function(){return{type:"CLOSE_SELECT_JOB"}},fetchJobs:function(){return{type:"FETCH_JOB_REQUEST",loading:!0}},closeSnack:g})(Object(s.withStyles)(function(e){return{root:{width:"90%",margin:"0 auto"},running:{color:"#8b8ffb"},failed:{color:"#f26363"},finished:{color:"#63f291"},progress:{height:10,margin:10},close:{padding:e.spacing.unit/2}}})(se)),le=a(345),ue=a(347),me=Object(s.withStyles)({root:{width:"90%",margin:"0 auto",paddingTop:20}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(d,null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(le.a,{to:"/dashboard/"},"Generate from YAML")),r.a.createElement("li",null,r.a.createElement(le.a,{to:"/dashboard/defaults"},"Generate from parameters")),r.a.createElement("li",null,r.a.createElement(le.a,{to:"/dashboard/watch"},"Watch"))),r.a.createElement(ue.a,{exact:!0,path:"/dashboard/",component:_}),r.a.createElement(ue.a,{path:"/dashboard/defaults",component:J}),r.a.createElement(ue.a,{path:"/dashboard/watch",component:ie}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(144),be=a.n(pe),de=a(42),he=a(143),ge=a.n(he),Ee=a(82),fe=a(20),ke={yaml:'\n    apiVersion: kubebench.operator/v1\n    kind: KubebenchJob\n    metadata:\n      name: kubebench-job\n      namespace: default\n    spec:\n      serviceAccount: default\n      volumeSpecs:\n        configVolume:\n          name: my-config-volume\n          persistentVolumeClaim:\n            claimName: kubebench-config-pvc\n        experimentVolume:\n          name: my-experiment-volume\n          persistentVolumeClaim:\n            claimName: kubebench-exp-pvc\n      secretSpecs: # optional\n        githubTokenSecret: # optional\n          secretName: my-github-token-secret\n          secretKey: my-github-token-secret-key\n        gcpCredentialsSecret: # optional\n          secretName: my-gcp-credentials-secret\n          secretKey: my-gcp-credentials-secret-key\n      jobSpecs:\n        preJob: # optional\n          container: # optional between "container" and "resource"\n            name: my-prejob\n            image: gcr.io/myprejob-image:latest # change it before using\n        mainJob: # mandatory\n          resource: # optional between "container" and "resource"\n            manifestTemplate:\n              valueFrom:\n                ksonnet: # optional, more types in the future\n                  prototype: kubebench-example-tfcnn\n                  package: kubebench-examples\n                  registry: github.com/kubeflow/kubebench/tree/master/kubebench\n            manifestParameters:\n              valueFrom:\n                path: abc/def/ghi.yaml\n            createSuccessCondition: createSuccess # optional\n            createFailureCondition: createFailure # optional\n            runSuccessCondition: runSuccess # optional\n            runFailureCondition: runFailre # optional\n            #other optional fields: "manifest" - string of raw manifest\n        postJob: # optional\n          container: # optional between "container" and "resource"\n            name: my-postjob\n            image: gcr.io/kubeflow-images-public/kubebench/kubebench-example-tf-cnn-post-processor:3c75b50\n      reportSpecs: # optional\n        csv: # optional\n            - inputPath: result.json\n              outputPath: report.csv',loading:!1,snackOpen:!1,snackText:"",jobsList:[],modalOpen:!1,currentId:null,currentName:"",currentLinks:["First link","Second link"],parameters:[{name:"name",value:"kubebench-job",description:"Job name"},{name:"namespace",value:"default",description:"Job namespace"},{name:"serviceAccount",value:"default",description:"The service account used to run the job"},{name:"githubTokenSecret",description:"",value:"GitHub token secret"},{name:"githubTokenSecretKey",value:"",description:"Key of GitHub token secret"},{name:"gcpCredentialsSecret",value:"GCP credentials secret",description:""},{name:"gcpCredentialsSecretKey",value:"",description:"Key of GCP credentials secret"},{name:"mainJobKsPrototype",value:"kubebench-example-tfcnn",description:"The Ksonnet prototype of the job being benchmarked"},{name:"mainJobKsPackage",value:"kubebench-examples",description:"The Ksonnet package of the job being benchmarked"},{name:"mainJobKsRegistry",value:"github.com/kubeflow/kubebench/tree/master/kubebench",description:"The Ksonnet registry of the job being benchmarked"},{name:"mainJobConfig",value:"tf-cnn/tf-cnn-dummy.yaml",description:"Path to the config of the benchmarked job"},{name:"experimentConfigPvc",value:"kubebench-config-pvc",description:"Configuration PVC"},{name:"experimentDataPvc",value:"",description:"Data PVC"},{name:"experimentRecordPvc",value:"kubebench-exp-pvc",description:"Experiment PVC"},{name:"postJobImage",value:"gcr.io/kubeflow-images-public/kubebench/kubebench-example-tf-cnn-post-processor:3c75b50",description:"Image of post processor"},{name:"postJobArgs",value:"",description:"Arguments of post processor"},{name:"reportType",value:"csv",description:"Type of reporter"},{name:"csvReporterInput",value:"result.json",description:"The input of CSV reporter"},{name:"csvReporterOutput",value:"report.csv",description:"The output of CSV reporter"}]},ve=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CHANGE_YAML":return Object(fe.a)({},a,{yaml:n.yaml});case"DEPLOY_SUBMIT":return Object(fe.a)({},a,{loading:n.loading});case"DEPLOY_SUCCESS":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.text});case"DEPLOY_FAILURE":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.error});case"DEPLOY_PARAM_SUBMIT":return Object(fe.a)({},a,{loading:n.loading});case"DEPLOY_PARAM_SUCCESS":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.text});case"DEPLOY_PARAM_FAILURE":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.error});case"CLOSE_SNACK":return Object(fe.a)({},a,{snackOpen:!1});case"SELECT_JOB":return Object(fe.a)({},a,{modalOpen:!0,currentId:n.id,currentName:a.jobsList[n.id].name});case"CLOSE_SELECT_JOB":return Object(fe.a)({},a,{modalOpen:!1,currentId:n.id});case"CHANGE_PARAMETER":var r=a.parameters.slice();return r[(e=r,t=n.name,e.findIndex(function(e){return e.name===t}))].value=n.value,Object(fe.a)({},a,{parameters:r});case"FETCH_JOB_REQUEST":return Object(fe.a)({},a,{loading:n.loading});case"FETCH_JOB_SUCCESS":return Object(fe.a)({},a,{jobsList:n.jobsList,loading:!1});case"FETCH_JOB_FAILURE":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.error});case"DELETE SUBMIT":return Object(fe.a)({},a,{loading:n.loading});case"DELETE_SUCCESS":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.text});case"DELETE_FAILURE":return Object(fe.a)({},a,{loading:!1,snackOpen:!0,snackText:n.error});default:return a}};var Oe=a(17),ye=a.n(Oe),xe=a(11),je=a(52),Se=a.n(je),Ce=ye.a.mark(Ue),we=ye.a.mark(function e(){var t;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(xe.e)("DEPLOY_SUBMIT");case 3:return t=e.sent,e.prev=4,e.next=7,Object(xe.b)(Te,t.yaml);case 7:if(200!==e.sent){e.next=11;break}return e.next=11,Object(xe.d)({type:"DEPLOY_SUCCESS",text:"Successfully submitted."});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(4),e.next=17,Object(xe.d)({type:"DEPLOY_FAILURE",error:"Whoops, something is wrong..."});case 17:e.next=0;break;case 19:case"end":return e.stop()}},e,this,[[4,13]])}),Te=ye.a.mark(function e(t){var a,n;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={yaml:t},e.next=4,Object(xe.b)(Se.a.post,"/dashboard/submit_yaml/",a);case 4:return n=e.sent,e.abrupt("return",n.status);case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(xe.d)({type:"DEPLOY_FAILURE",error:"Whoops, something is wrong..."});case 12:case"end":return e.stop()}},e,this,[[0,8]])}),_e=ye.a.mark(function e(){var t;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(xe.e)("DEPLOY_PARAM_SUBMIT");case 3:return t=e.sent,e.prev=4,e.next=7,Object(xe.b)(Le,t.parameters);case 7:if(200!==e.sent){e.next=11;break}return e.next=11,Object(xe.d)({type:"DEPLOY_PARAM_SUCCESS",text:"Successfully submitted."});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(4),e.next=17,Object(xe.d)({type:"DEPLOY_PARAM_FAILURE",error:"Whoops, something is wrong..."});case 17:e.next=0;break;case 19:case"end":return e.stop()}},e,this,[[4,13]])}),Le=ye.a.mark(function e(t){var a,n;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={},t.map(function(e,t){a[e.name]=e.value}),e.next=5,Object(xe.b)(Se.a.post,"/dashboard/submit_params/",a);case 5:return n=e.sent,e.abrupt("return",n.status);case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Object(xe.d)({type:"DEPLOY_PARAM_FAILURE",error:"Whoops, something is wrong..."});case 13:case"end":return e.stop()}},e,this,[[0,9]])}),Ae=ye.a.mark(function e(){var t,a,n;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(xe.e)("FETCH_JOB_REQUEST");case 3:return e.sent,e.prev=4,e.next=7,Object(xe.b)(Pe);case 7:for(t=e.sent,a=[],n=0;n<t.Names.length;n++)a.push({name:t.Names[n],status:t.Status[n]});return e.next=12,Object(xe.d)({type:"FETCH_JOB_SUCCESS",jobsList:a});case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message));case 17:e.next=0;break;case 19:case"end":return e.stop()}},e,this,[[4,14]])}),Pe=ye.a.mark(function e(){var t;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(xe.b)(Se.a.get,"/dashboard/fetch_jobs/");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(xe.d)({type:"FETCH_JOB_FAILURE",error:"Whoops, something is wrong..."});case 11:case"end":return e.stop()}},e,this,[[0,7]])}),Ne=ye.a.mark(function e(){var t;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(xe.e)("DELETE SUBMIT");case 3:return t=e.sent,e.prev=4,e.next=7,Object(xe.b)(De,t.name);case 7:if("ok"!==e.sent.Status){e.next=13;break}return e.next=11,Object(xe.d)({type:"DELETE_SUCCESS",text:"Successfully deleted"});case 11:e.next=15;break;case 13:return e.next=15,Object(xe.d)({type:"DELETE_FAILURE",error:"Whoops, something is wrong"});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message));case 20:e.next=0;break;case 22:case"end":return e.stop()}},e,this,[[4,17]])}),De=ye.a.mark(function e(t){var a,n;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={name:t},e.next=4,Object(xe.b)(Se.a.post,"/dashboard/delete_job/",a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(xe.d)({type:"DELETE_FAILURE",error:"Whoops, something is wrong..."});case 12:case"end":return e.stop()}},e,this,[[0,8]])});function Ue(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(xe.a)([Object(xe.c)(Ae),Object(xe.c)(Ne),Object(xe.c)(we),Object(xe.c)(_e)]);case 2:case"end":return e.stop()}},Ce,this)}var Ie=a(346),Re=function(e){var t=Object(Ee.b)(),a=Object(de.d)(ve,e,Object(de.c)(Object(de.a)(t,ge.a)));return a.runSaga=t.run,a.close=function(){return a.dispatch(Ee.a)},a}();Re.runSaga(Ue);var Je=Object(s.createMuiTheme)({palette:{primary:{main:"#ab47bc"},secondary:{main:"#cddc39"}}});o.a.render(r.a.createElement(h.a,{store:Re},r.a.createElement(Ie.a,null,r.a.createElement(s.MuiThemeProvider,{theme:Je},r.a.createElement(be.a,null),r.a.createElement(me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.5fea0b1b.chunk.js.map